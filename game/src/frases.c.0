#include "../inc/include.h"


static const FRASE _frases[][200] =
{
	// ingl�s
	{
		(FRASE) {  1,  3, 21, "You forgot something?" },
		(FRASE) {  1,  0,  0, "RISKY WOODS" },
		(FRASE) {  1,  0,  0, "MURCIANO'S LAIR" },
		(FRASE) {  1,  0,  0, "ABU'S DEPTHS" },
		(FRASE) {  1,  0,  0, "CHUMINO BEACH" },
		(FRASE) {  1,  0,  0, "KBRAH'S CASTLE" },
		(FRASE) {  1,  0,  0, "DUDEWORLD" },

		(FRASE) {  2,  0,  0, "PAUSED" },
		(FRASE) {  2,  0,  0, "\\ RESUME" },
		(FRASE) {  2,  0,  0, "  RESTART" },
		(FRASE) {  2,  0,  0, "  GIVE UP" },

		(FRASE) {  3,  0,  0, "STAGE CLEAR" },

		(FRASE) {  4,  0,  0, "ROUND   " },

		(FRASE) {  5,  0,  0, "GOT IT!" },
		(FRASE) {  5,  0,  0, "BURNING UP" },
		(FRASE) {  5,  0,  0, "RED HOT" },
		(FRASE) {  5,  0,  0, "HOT" },
		(FRASE) {  5,  0,  0, "WARM" },
		(FRASE) {  5,  0,  0, "WARMISH" },
		(FRASE) {  5,  0,  0, "LUKEWARM" },
		(FRASE) {  5,  0,  0, "COOL" },
		(FRASE) {  5,  0,  0, "CHILLY" },
		(FRASE) {  5,  0,  0, "COLD" },
		(FRASE) {  5,  0,  0, "ICE" },
		(FRASE) {  5,  0,  0, "BELOW ZERO" },

		(FRASE) {  6,  0,  0, "" },
		(FRASE) {  6,  0,  0, "" },
		(FRASE) {  6,  0,  0, "" },

		(FRASE) {  7,  0,  0, "" },
		(FRASE) {  7,  0,  0, "" },




		(FRASE) {  0,  0,  0, "" }, // No quitar
	},


	// espa�ol
	{
		(FRASE) {  1,  3, 21, "�Olvidaste algo?" },
		(FRASE) {  1,  0,  0, "RISKY WOODS" },
		(FRASE) {  1,  0,  0, "GUARIDA MURCIANA" },
		(FRASE) {  1,  0,  0, "ABISMO DE ABU" },
		(FRASE) {  1,  0,  0, "PLAYA CHUMINO" },
		(FRASE) {  1,  0,  0, "CASTILLO DE KBRAH" },
		(FRASE) {  1,  0,  0, "DUDEWORLD" },

		(FRASE) {  2,  0,  0, "PAUSA" },
		(FRASE) {  2,  0,  0, "\\ CONTINUAR" },
		(FRASE) {  2,  0,  0, "  REINICIAR" },
		(FRASE) {  2,  0,  0, "  SALIR" },

		(FRASE) {  3,  0,  0, "NIVEL COMPLETADO" },

		(FRASE) {  4,  0,  0, "NIVEL   " },

		(FRASE) {  5,  0,  0, "�BINGO!" }, // 13
		(FRASE) {  5,  0,  0, "TE QUEMAS" }, // 14
		(FRASE) {  5,  0,  0, "AL ROJO VIVO" }, // 15
		(FRASE) {  5,  0,  0, "ARDIENDO" }, // 16
		(FRASE) {  5,  0,  0, "CALIENTE" }, // 17
		(FRASE) {  5,  0,  0, "TEMPLADO" }, // 18
		(FRASE) {  5,  0,  0, "TIBIO" }, // 19
		(FRASE) {  5,  0,  0, "FRESQUITO" }, // 20
		(FRASE) {  5,  0,  0, "FRIO" }, // 21
		(FRASE) {  5,  0,  0, "CONGELADO" }, // 22
		(FRASE) {  5,  0,  0, "BAJO CERO" }, // 23

		(FRASE) {  6,  0,  0, "Siempre te enga�a el lobo." },                           // 25 // woods
		(FRASE) {  6,  0,  0, "Hielo para los refrescos pero ahora no tienes sed." },   // 26 // iceland
		(FRASE) {  6,  0,  0, "Mejor no, la arena se te mete en la coquilla." },        // 24 // egypt
		(FRASE) {  6,  0,  0, "No llevas traje de ba�o." },                             // 27 // beach
		(FRASE) {  6,  0,  0, "�Por qu� no vas directamente al volc�n?" },              // 28
		(FRASE) {  6,  0,  0, "�Oh, venga ya! No tengo todo el d�a." },                 // 29
		(FRASE) {  6,  0,  0, "�No has curioseado ya suficiente?" },                    // 30
		(FRASE) {  6,  0,  0, "No puedes ir ah�, ese es el tri�ngulo prohibido."  },    // 31 // Monkey Island 2 refference
		(FRASE) {  6,  0,  0, "No puedes ir ah�, ese es el cuadrado prohibido."   },    // 32 // Monkey Island 2 refference
		(FRASE) {  6,  0,  0, "No puedes ir ah�, ese es el pent�gono prohibido."  },    // 33 // Monkey Island 2 refference
		(FRASE) {  6,  0,  0, "No puedes ir ah�, ese es el hex�gono prohibido."   },    // 34 // Monkey Island 2 refference
		(FRASE) {  6,  0,  0, "No puedes ir ah�, ese es el dec�gono prohibido."   },    // 35 // Monkey Island 2 refference
		(FRASE) {  6,  0,  0, "No puedes ir ah�, ese es el dodecaedro prohibido." },    // 36 // Monkey Island 2 refference

		(FRASE) {  7,  0,  0, "�rase una vez el malvado Kbrah, se�or de las tierras volc�nicas..." },
		(FRASE) {  7,  0,  0, "�l hac�a que la princesa siempre estuviera en otro castillo." },
		(FRASE) {  7,  0,  0, "Se pasaba todos los juegos con una sola vida." },
		(FRASE) {  7,  0,  0, "Y tocaba en un grupo de heavy metal." },

		(FRASE) {  8,  0,  0, "Pero sobre todo era conocido por las fiestas que organizaba con sus amigotes." },

		(FRASE) {  9,  0,  0, "Todos com�an perdices hasta que una ma�ana..." }, // "Todos com�an perdices hasta que una ma�ana..." }, // A la ma�ana siguiente, el no menos fiestero Rey Notah, se despierta con su tradicional resaca..." },
		(FRASE) {  9,  0,  0, "El cofre real est� abierto... |WBREAK �OH, NO! |BREAK |WAIT:60 �HAN ROBADO EL HOLY PORR�N!" },
		(FRASE) {  9,  0,  0, "�Rey Notah, la princesa Beach tambi�n ha sido secuestrada!" },
		(FRASE) {  9,  0,  0, "No moleste, Cort�zar.|BREAK Esto es muy serio, sin el porr�n el reino est� condenado.|WCLEAR �R�pido! �Avisa a Griel!" },

		(FRASE) { 10,  0,  0, "Griel, han robado el Holy Porr�n, su poder es temible. |BREAK �Debes recuperarlo cuanto antes!" },
		(FRASE) { 10,  0,  0, "�Tiene alguna pista, majestad?" },
		(FRASE) { 10,  0,  0, "Kbrah me la tiene jurada. |BREAK Adem�s el sal�n apesta a ese truh�n, seguro que ha sido �l. |WCLEAR Encuentra a Kbrah y trae de vuelta el Porr�n." },
		(FRASE) { 10,  0,  0, "�Y qu� hay de la princesa? |BREAK Tambi�n ha sido secuestrada..." },
		(FRASE) { 10,  0,  0, "Eso no importa ahora. Vuelve con el Holy Porr�n y te conceder� su mano. |WCLEAR �Ponte en marcha! |BREAK �El reino se desploma sin su protecci�n!" },

		(FRASE) { 11,  0,  0, "Vuelve con el Porr�n y te conceder� la mano de mi hija. |BREAK �Ahora largo de aqu�!" },

		// puerta opcion 1
		(FRASE) { 12,  0,  0, "Vaya, la t�pica puerta cerrada. |WAIT:60 |BREAK Parece que ser� un juego dif�cil. |WCLEAR Un momento, esos huecos en la pared... |WAIT:60 |BREAK Seguro que hay que poner algo para abrir la puerta, lo he visto en otros juegos. |WCLEAR �Ya s�! Debo reunir los Monedones Legendarios repartidos por el reino. |WCLEAR Diablos, esto me va a llevar toda la tarde. |WAIT:60 |BREAK �Vamos all�!" },
		// puerta opcion 2
		(FRASE) { 13,  0,  0, "Nunca aprend� a restar. |BREAK Mejor vuelvo luego." }, //(FRASE) { 14,  0,  0, "(Ese d�a el programador estaba vago y no ense�� a Griel a restar)" },

		// puerta opcion 3
		(FRASE) { 14,  0,  0, "Gracias por devolver los medallones |BREAK �Por qu� te has molestado?" },
		(FRASE) { 14,  0,  0, "�Pues para abrir la puerta! |WBREAK Vengo a ajustar cuentas con Kbrah..." },
		(FRASE) { 14,  0,  0, "Haber llamado al timbre. Basta con traerle un regalito, ya sabes c�mo es." },
		(FRASE) { 14,  0,  0, "�Suerte, chaval! |BREAK La vas a necesitar." },

		// final 1
		(FRASE) { 15,  0,  0, "Kbrah, bestia pestilente. |WAIT:60 |BREAK Devuelve el Holy Porr�n. S� que lo tienes t�." },
		(FRASE) { 15,  0,  0, "�Ese cacharro? |WAIT:100 |BREAK Toma, ll�vatelo, no me ha gustado nada..." }, //Lo cog� por hacer el gamberro. No sab�a que era tan valioso. Da igual, ll�vatelo." },
		(FRASE) { 15,  0,  0, "Uuohh! |WAIT:60 |BREAK Papi, qu� chico m�s chachi. |BREAK �Me lo puedo quedar?" },
		(FRASE) { 15,  0,  0, "Ni hablar. |BREAK No te he educado para te juntes con chicos buenos. |WBREAK:60 Adem�s ya se va �verdad?" },
		(FRASE) { 15,  0,  0, "No tan r�pido malandr�n, la princesa Beach tambi�n se viene conmigo." },
		(FRASE) { 15,  0,  0, "Ya no est� aqu�. |BREAK No pudimos retenerla por m�s tiempo... |WBREAK:60 Ahora coge el porr�n y l�rgate." },

		// final 2
		(FRASE) { 16,  0,  0, "�Fant�stico, hijo! |BREAK Lo has conseguido. La verdad es que no daba un duro por ti pero has hecho un buen trabajo." },
		(FRASE) { 16,  0,  0, "�En qu� consiste el magn�fico poder del Holy Porr�n?" },
		(FRASE) { 16,  0,  0, "Este maravilloso artefacto proporciona vino sin fin a su poseedor. |WBREAK Un infinito torrente de fresco n�ctar, algo picao, pero fresco." },
		(FRASE) { 16,  0,  0, "�Y ESO ES TODO? |WBREAK �PARA ESO ME HE JUGADO LA VIDA? |WCLEAR No veo c�mo contribu�a a la prosperidad del reino." },
		(FRASE) { 16,  0,  0, "Ahorramos un mont�n de dinero en vino. |BREAK Adem�s no podr�a gobernar sin estar borracho." },
		(FRASE) { 16,  0,  0, "No puedo creerlo... |WBREAK En fin, me prometi� la mano de la princesa, �recuerda?" },

		// final 2 // s�lo debilucho
		(FRASE) { 17,  0,  0, "�Ah no! |WBREAK No permito que mi hija se vaya con alguien que termina los juegos en nivel m�s f�cil. |WCLEAR Int�ntalo de nuevo en otra dificultad y ya veremos..." }, // Adem�s, ni siquiera estaba borracho cuando te lo promet�, as� que no cuenta. Eso s�, si te traes un vasito, te lo relleno un par de veces." },
		(FRASE) { 17,  0,  0, "Pero... |WAIT:60 pero..." },
		(FRASE) { 17,  0,  0, "Lo s�, Griel, lo s�... ha, ha, ha. |WBREAK Mira, ahora vienen tus creadores... |WAIT:60 3... |WAIT:60 2... |WAIT:60 1..." },
		// aqu� acaba el final del debilucho

		// final 2 // tipo duro o pesadilla
		(FRASE) { 18,  0,  0, "Por supuesto... |WBREAK �Esta hecha una mujercita! |WCLEAR �BEACH, CIELO! |WBREAK �RECUERDAS A GRIEL? |WBREAK �A VENIDO A PEDIR TU MANO!" },
		(FRASE) { 18,  0,  0, "�Griel? |WBREAK �Eres t�...?" },

		// final 3 // tipo duro o pesadilla
		(FRASE) { 19,  0,  0, "�GROARRR! |BREAK �SI EST�S HECHO UN BOMBONCITO! |WBREAK Ven a los brazos de mami..." },
		(FRASE) { 19,  0,  0, "�AAAAAAH! |BREAK �SOCORRO, QUE ME COME! " },
		(FRASE) { 19,  0,  0, "No corras, chiquit�n. Deja que te estruje un poco." },

		// final 3 // s�lo tipo duro
		(FRASE) { 20,  0,  0, "�Buah, vaya final! |WBREAK Cualquier otro hubiera sido mejor. |WBREAK Si lo s� elijo el nivel m�s dif�cil." },
		// aqu� acaba el final del tipo duro

		// final 3 // s�lo pesadilla
		(FRASE) { 21,  0,  0, "�TOMA ESTO! |WBREAK Yo vi primero a esta sardinilla." },
		(FRASE) { 21,  0,  0, "......?! |WBREAK Ufff, me he librado por los pelos." },

			// final 4 // s�lo pesadilla
		(FRASE) { 22,  0,  0, "Gracias por salvarme. |WBREAK �Por qu� has venido en mi ayuda?" },
		(FRASE) { 22,  0,  0, "Me hizo gracia tu casco con cuernecillos y adem�s... |WCLEAR Has terminado el nivel m�s dif�cil y eso no se ve todos los d�as. |WBREAK !ENHORABUENA!" },
		(FRASE) { 22,  0,  0, "Han sido muchas horas pero ha merecido la pena. |WBREAK Oye �no me estar�s raptando, verdad?" },
		(FRASE) { 22,  0,  0, "�Ja, ja, ja! |WBREAK Esto hay que celebrarlo. Ahora te voy a ense�ar el \"verdadero\" final." },
		(FRASE) { 22,  0,  0, "Estupendo, pues en marcha hacia la siguiente escena." } , //�Me llevas a la siguiente escena?" },
		(FRASE) { 22,  0,  0, "Oh, vaya. Eres m�s bobo de lo que imaginaba... |WAIT:180" },







		(FRASE) {  0,  0,  0, "" }, // No quitar
	}
};






static u8 * _prepare_string ( u8 *cadena )
{
	u16 i;
	u8  aux[FRASES_MAX_CHARS];

	for ( i=0; cadena[i]; i++ )
	{
		switch ( cadena[i] )
		{
			case 250: aux [ i ] = 32 -  1; break; // �
			case 243: aux [ i ] = 32 -  2; break; // �
			case 241: aux [ i ] = 32 -  3; break; // �
			case 237: aux [ i ] = 32 -  4; break; // �
			case 233: aux [ i ] = 32 -  5; break; // �
			case 225: aux [ i ] = 32 -  6; break; // �
			case 218: aux [ i ] = 32 -  7; break; // �
			case 211: aux [ i ] = 32 -  8; break; // �
			case 209: aux [ i ] = 32 -  9; break; // �
			case 205: aux [ i ] = 32 - 10; break; // �
			case 201: aux [ i ] = 32 - 11; break; // �
			case 193: aux [ i ] = 32 - 12; break; // �
			case 191: aux [ i ] = 32 - 13; break; // �
			case 161: aux [ i ] = 32 - 14; break; // �
			default:	 aux [ i ] = cadena [ i ];
		}
	}

	aux[i] = '\0';

	return aux;
}


static u8 _inicio;
static u8 _indice;
static u8 _cuantos;



////////////////////////////////////////////////////////////////////////



void frases_init ( u8 indice )
{
	_inicio  = 0;
	_cuantos = 0;
	_indice  = indice ;

	while ( _frases [ gamestate.lenguaje ] [ _cuantos++ ].index ) ;
}


u8 frases_next ( )
{
	while ( _inicio < _cuantos )
	{
		if ( _frases [ gamestate.lenguaje ] [ _inicio ].index == _indice )
		{
			++_inicio;

			return _inicio - 1;
		}

		++_inicio;
	}

	return _cuantos;
}


FRASE *frases_get ( u8 numero )
{
	return ( FRASE* ) &_frases [ gamestate.lenguaje ] [ numero ];
}


void frases_draw ( u8 numero )
{
	FRASE *f = frases_get ( numero );

	VDP_drawText ( _prepare_string ( f->cadena ), f->x, f->y );
}


void frases_type ( u8 numero, u16 espera )
{
	FRASE *f = frases_get ( numero );
	u8 *frase = _prepare_string ( f->cadena );

	if ( !espera )
	{
		VDP_drawText ( frase, f->x, f->y );
	}
	else
	{
		u8 x = f->x;

		while ( *frase )
		{
			u8 txt[2] = { *frase++ };
			VDP_drawText ( txt, x++, f->y );
			waitMs ( espera );
		}
	}


}

u8 *frases_cadena ( u8 numero )
{
	FRASE *f = frases_get ( numero );

	return _prepare_string ( f->cadena );
}
