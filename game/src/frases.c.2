#include "../inc/include.h"


static const FRASE _list [ ] =
{
	(FRASE) {      99, 99, "" },



	///////////////////////////////////////////////////////////////////////////////////////////////////////



	(FRASE) { ENGLISH,   1, "You forgot something?" },
	(FRASE) { ENGLISH,   1, "RISKY WOODS" },
	(FRASE) { ENGLISH,   1, "MURCIANO'S LAIR" },
	(FRASE) { ENGLISH,   1, "ABU'S DEPTHS" },
	(FRASE) { ENGLISH,   1, "CHUMINO BEACH" },
	(FRASE) { ENGLISH,   1, "KBRAH'S CASTLE" },
	(FRASE) { ENGLISH,   1, "DUDEWORLD" },

	(FRASE) { ENGLISH,   2, "PAUSED" },
	(FRASE) { ENGLISH,   2, "\\ RESUME" },
	(FRASE) { ENGLISH,   2, "  RESTART" },
	(FRASE) { ENGLISH,   2, "  GIVE UP" },

	(FRASE) { ENGLISH,   3, "STAGE CLEAR" },

	(FRASE) { ENGLISH,   4, "ROUND   " },

	(FRASE) { ENGLISH,   5, "GOT IT!" },
	(FRASE) { ENGLISH,   5, "BURNING UP" },
	(FRASE) { ENGLISH,   5, "RED HOT" },
	(FRASE) { ENGLISH,   5, "HOT" },
	(FRASE) { ENGLISH,   5, "WARM" },
	(FRASE) { ENGLISH,   5, "WARMISH" },
	(FRASE) { ENGLISH,   5, "LUKEWARM" },
	(FRASE) { ENGLISH,   5, "COOL" },
	(FRASE) { ENGLISH,   5, "CHILLY" },
	(FRASE) { ENGLISH,   5, "COLD" },
	(FRASE) { ENGLISH,   5, "ICE" },
	(FRASE) { ENGLISH,   5, "BELOW ZERO" },



	///////////////////////////////////////////////////////////////////////////////////////////////////////



	(FRASE) { SPANISH,  1, "�Olvidaste algo?" },
	(FRASE) { SPANISH,  1, "RISKY WOODS" },
	(FRASE) { SPANISH,  1, "GUARIDA MURCIANA" },
	(FRASE) { SPANISH,  1, "ABISMO DE ABU" },
	(FRASE) { SPANISH,  1, "PLAYA CHUMINO" },
	(FRASE) { SPANISH,  1, "CASTILLO DE KBRAH" },
	(FRASE) { SPANISH,  1, "DUDEWORLD" },

	(FRASE) { SPANISH,  2, "PAUSA" },
	(FRASE) { SPANISH,  2, "\\ CONTINUAR" },
	(FRASE) { SPANISH,  2, "  REINICIAR" },
	(FRASE) { SPANISH,  2, "  SALIR" },

	(FRASE) { SPANISH,  3, "NIVEL COMPLETADO" },

	(FRASE) { SPANISH,  4, "NIVEL   " },

	(FRASE) { SPANISH,  5, "�BINGO!" }, // 13
	(FRASE) { SPANISH,  5, "TE QUEMAS" }, // 14
	(FRASE) { SPANISH,  5, "AL ROJO VIVO" }, // 15
	(FRASE) { SPANISH,  5, "ARDIENDO" }, // 16
	(FRASE) { SPANISH,  5, "CALIENTE" }, // 17
	(FRASE) { SPANISH,  5, "TEMPLADO" }, // 18
	(FRASE) { SPANISH,  5, "TIBIO" }, // 19
	(FRASE) { SPANISH,  5, "FRESQUITO" }, // 20
	(FRASE) { SPANISH,  5, "FR�O" }, // 21
	(FRASE) { SPANISH,  5, "CONGELADO" }, // 22
	(FRASE) { SPANISH,  5, "BAJO CERO" }, // 23

	(FRASE) { SPANISH,  6, "Siempre me enga�a el lobo." },                           // 25 // woods
	(FRASE) { SPANISH,  6, "Hielo para los refrescos." },                            // 26 // iceland
	(FRASE) { SPANISH,  6, "Mejor no, la arena se me mete en la coquilla." },        // 24 // egypt
	(FRASE) { SPANISH,  6, "No llevo traje de ba�o." },                              // 27 // beach
	(FRASE) { SPANISH,  6, "�Ll�vame al volc�n!" },                                  // 28
	(FRASE) { SPANISH,  6, "�Oh, venga ya! No tengo todo el d�a." },                 // 29
	(FRASE) { SPANISH,  6, "�No has curioseado suficiente?" },                       // 30
	(FRASE) { SPANISH,  6, "No puedo ir ah�, ese es el tri�ngulo prohibido."  },    // 31 // Monkey Island 2 refference
	(FRASE) { SPANISH,  6, "No puedo ir ah�, ese es el cuadrado prohibido."   },    // 32 // Monkey Island 2 refference
	(FRASE) { SPANISH,  6, "No puedo ir ah�, ese es el pent�gono prohibido."  },    // 33 // Monkey Island 2 refference
	(FRASE) { SPANISH,  6, "No puedo ir ah�, ese es el hex�gono prohibido."   },    // 34 // Monkey Island 2 refference
	(FRASE) { SPANISH,  6, "No puedo ir ah�, ese es el dec�gono prohibido."   },    // 35 // Monkey Island 2 refference
	(FRASE) { SPANISH,  6, "No puedo ir ah�, ese es el dodecaedro prohibido." },    // 36 // Monkey Island 2 refference
	(FRASE) { SPANISH,  6, "No puedo ir ah�, ese es el pal�ndromo prohibido." },    // 36 // Monkey Island 2 refference

	(FRASE) { SPANISH,  7, "Este es el malvado Kbrah, un villano de lo m�s feliz." },
	(FRASE) { SPANISH,  7, "Secuestra princesas y las cambia de castillo." },
	(FRASE) { SPANISH,  7, "Juega horas y horas a horribles videojuegos violentos." },
	(FRASE) { SPANISH,  7, "Y toca en un grupo que hace despertar a los muertos. |WCLEAR Adem�s..." },

	(FRASE) { SPANISH,  8, "Monta fiestas con sus diab�licos amigotes. |WCLEAR Fiestas que a veces acaban mal..." },

	(FRASE) { SPANISH,  9, "Castillo del Rey Notah. |WAIT:60 Por la ma�ana..." }, // "Todos com�an perdices hasta que una ma�ana..." }, // A la ma�ana siguiente, el no menos fiestero Rey Notah, se despierta con su tradicional resaca..." },
	(FRASE) { SPANISH,  9, "�Mmmm? |WCLEAR �Qui�n ha estado hurgando aqu� durante la noche? |WCLEAR �AAAHHHHH!" }, // El cofre real est� abierto... �OH, NO! |BREAK |WAIT:60 �HAN ROBADO EL HOLY PORR�N!" },
	(FRASE) { SPANISH,  9, "�EL HOLY PORR�N HA DESAPARECIDO!" }, // El cofre real est� abierto... �OH, NO! |BREAK |WAIT:60 �HAN ROBADO EL HOLY PORR�N!" },
	(FRASE) { SPANISH,  9, "�La princesa tampoco est�!" },
	(FRASE) { SPANISH,  9, "�Minucias! |WAIT:60 El Holy Porr�n es lo m�s importante ahora. |WCLEAR Avisa a Griel. |WAIT:30 Es el �nico que se acost� temprano." },


//                          //"Todo apesta a mi archienemigo Kbrah. Lo primero es el Holy porr�n, pero vuelve con mi hija y te conceder� su mano"
//	(FRASE) { SPANISH, 10, "Griel, sin el poder del Holy Porr�n el reino est� condenado. |WBREAK �Debes recuperarlo cuanto antes!"},//  "Griel, han robado el Holy Porr�n, su poder es temible. �Debes recuperarlo cuanto antes!" },
//	(FRASE) { SPANISH, 10, "Esto apesta a mi archienemigo Kbrah. |WBREAK �Seguro que ha sido �l!" }, // "Kbrah me la tiene jurada. |BREAK Adem�s el sal�n apesta a ese truh�n, seguro que ha sido �l. |WCLEAR Encuentra a Kbrah y trae de vuelta el Porr�n." },
//	(FRASE) { SPANISH, 10, "�Es cierto que tambi�n ha secuestrado a la princesa?" }, // "�Y qu� hay de la princesa? |BREAK Tambi�n ha sido secuestrada..." },
//	(FRASE) { SPANISH, 10, "�Olv�dala por ahora! |WBREAK Pero si vuelves con el Holy Porr�n te conceder� su mano. |WCLEAR �As� que ponte en marcha o el caos impondr� su ley!" }, // "Eso no importa ahora. Vuelve con el Holy Porr�n y te conceder� su mano. |WCLEAR �Ponte en marcha! |BREAK �El reino se desploma sin su protecci�n!" },
                          //"Todo apesta a mi archienemigo Kbrah. Lo primero es el Holy porr�n, pero vuelve con mi hija y te conceder� su mano"
	(FRASE) { SPANISH, 10, "Griel, sin el Holy Porr�n el reino est� perdido. |WAIT:30 �Debes recuperarlo cuanto antes! |WCLEAR Esto apesta a mi archienemigo Kbrah, seguro que ha sido �l."},//  "Griel, han robado el Holy Porr�n, su poder es temible. �Debes recuperarlo cuanto antes!" },
	(FRASE) { SPANISH, 10, "�Tambi�n se ha llevado a la princesa!" }, // "�Y qu� hay de la princesa? |BREAK Tambi�n ha sido secuestrada..." },
	(FRASE) { SPANISH, 10, "Vuelve con el Holy Porr�n y te conceder� su mano. |WBREAK �Ahora largo de aqu�!" },

	(FRASE) { SPANISH, 11, "Vuelve con el Holy Porr�n y te conceder� la mano de mi hija. |WBREAK �Ahora largo de aqu�!" },

	// puerta opcion 1
	(FRASE) { SPANISH, 12, "Vaya, cerrado a cal y canto. |WBREAK Esos huecos tienen la forma de... |WAIT:60 �Los Monedones Legendarios! |WCLEAR �Uf! Creo que voy a tener que buscarlos y ponerlos ah�. |WBREAK Hoy no me acuesto ni a las 9. �Maldita sea!" },// "Vaya, la t�pica puerta cerrada. |WAIT:60 |BREAK Parece que ser� un juego dif�cil. |WCLEAR Un momento, esos huecos en la pared... |WAIT:60 |BREAK Seguro que hay que poner algo para abrir la puerta, lo he visto en otros juegos. |WCLEAR �Ya s�! Debo reunir los Monedones Legendarios repartidos por el reino. |WCLEAR Diablos, esto me va a llevar toda la tarde. |WAIT:60 |BREAK �Vamos all�!" },
	// puerta opcion 2
	(FRASE) { SPANISH, 13, "Parece que no cuela. |WBREAK Mejor vuelvo luego." }, //(FRASE) { SPANISH, 14,  "(Ese d�a el programador estaba vago y no ense�� a Griel a restar)" },

	// puerta opcion 3
	(FRASE) { SPANISH, 14, "�T�o, qu� pasada! |WBREAK �Por qu� te has pegado tanto curro?" },
	(FRASE) { SPANISH, 14, "�No hac�an falta para abrir la puerta? |WBREAK Tengo que hablar con Kbrah." }, // �Pues para abrir la puerta! |WBREAK Vengo a ajustar cuentas con Kbrah..." },
	(FRASE) { SPANISH, 14, "�Qu� pringao! |WBREAK �Bastaba con traer unas cervezas y llamar al timbre!" },
	(FRASE) { SPANISH, 14, "�Rayos! |WBREAK Te matar� si le cuentas esto a alguien." },

	// final 1
	(FRASE) { SPANISH, 15, "Kbrah, bestia pestilente. |WBREAK Devu�lveme el Holy Porr�n. S� que lo tienes t�." },
	(FRASE) { SPANISH, 15, "�En serio vienes a por ese rid�culo cachivache? |WBREAK Toma, ll�vatelo, no me ha gustado nada..." }, // �Ese cacharro? |WAIT:100 |BREAK Toma, ll�vatelo, no me ha gustado nada..." }, //Lo cog� por hacer el gamberro. No sab�a que era tan valioso. Da igual, ll�vatelo." },
	(FRASE) { SPANISH, 15, "�Uoh! |WBREAK Papi, qu� chico m�s chachi. |WBREAK �Me lo puedo quedar?" },
	(FRASE) { SPANISH, 15, "�Qu�? �Ni hablar! |WBREAK No te he maleducado para que ahora te juntes con caballeritos. |WCLEAR Adem�s ya se iba, �verdad, campe�n?" },
	(FRASE) { SPANISH, 15, "No tan r�pido malandr�n, la princesa Beach tambi�n se viene conmigo." },
	(FRASE) { SPANISH, 15, "Ya no est� aqu�. |WBREAK No pudimos emm... retenerla por m�s tiempo. |WCLEAR Y ahora coge el porr�n y l�rgate antes de que me arrepienta." },

//	// final 2
//	(FRASE) { SPANISH, 16, "�Fant�stico, hijo! Lo has tra�do de vuelta. |WBREAK �Oh, mi Holy Porr�n querido!" }, // La verdad es que no daba un duro por ti pero has hecho un buen trabajo." },
//	(FRASE) { SPANISH, 16, "�En qu� consiste su magn�fico poder?" },
//	(FRASE) { SPANISH, 16, "Este m�gico artefacto proporciona vino sin fin a su poseedor. |WAIT:60 Un infinito torrente de fresco n�ctar, algo picao, pero infinito." },
//	(FRASE) { SPANISH, 16, "�Y ESO ES TODO? |WAIT:60 �PARA ESO ME HE JUGADO LA VIDA? |WBREAK �No veo c�mo contribu�a a la prosperidad del reino!" },
//	(FRASE) { SPANISH, 16, "Nos ahorra millones en vino. Adem�s sin estar borracho no podr�a gobernar. |WBREAK �Ser�a el caos!" },
//	(FRASE) { SPANISH, 16, "No puedo creerlo... |WAIT:60 En fin, me prometi� la mano de la princesa, �recuerda?" },

	// final 2
	(FRASE) { SPANISH, 16, "�Fant�stico, hijo! Lo has tra�do de vuelta. |WBREAK �Oh, mi Holy Porr�n querido!" }, // La verdad es que no daba un duro por ti pero has hecho un buen trabajo." },
	(FRASE) { SPANISH, 16, "�En qu� consiste su magn�fico poder?" },
	(FRASE) { SPANISH, 16, "Este m�gico artefacto proporciona vino sin fin a su poseedor. |WAIT:60 Un infinito torrente de fresco n�ctar, algo picao, pero infinito." },
	(FRASE) { SPANISH, 16, "�Y ESO ES TODO? |WAIT:60 �PARA ESO ME HE JUGADO LA VIDA? |WCLEAR No puedo creerlo... |WAIT:60 En fin, me prometi� la mano de la princesa, �recuerda?" },

	// final 2 // s�lo debilucho
	(FRASE) { SPANISH, 17, "�De eso nada! |WBREAK Te has pasado el juego en F�cil. �Cre�as que no me dar�a cuenta?" }, //,No permito que mi hija se vaya con alguien que termina los juegos en nivel m�s f�cil. |WCLEAR Int�ntalo de nuevo en otra dificultad y ya veremos..." }, // Adem�s, ni siquiera estaba borracho cuando te lo promet�, as� que no cuenta. Eso s�, si te traes un vasito, te lo relleno un par de veces." },
	(FRASE) { SPANISH, 17, "Pero, pero..." },
	(FRASE) { SPANISH, 17, "Lo siento, mi hija necesita un hombre de verdad. |WBREAK Mira, ahora vienen tus creadores... |WAIT:60 3, |WAIT:60 2, |WAIT:60 1..." }, // "Lo s�, Griel, lo s�... ha, ha, ha. |WBREAK Mira, ahora vienen tus creadores... |WAIT:60 3... |WAIT:60 2... |WAIT:60 1..." },
	// aqu� acaba el final del debilucho

	// final 2 // tipo duro o pesadilla
//	(FRASE) { SPANISH, 18, "Por supuesto... |WBREAK �No la ves desde hace a�os verdad? Volvi� ayer de estudiar en Orkford. |WCLEAR Se ha hecho una mujercita. |WBREAK �BEACH, CIELO! |WBREAK �RECUERDAS A GRIEL?  |WBREAK �A VENIDO A PEDIR TU MANO!" }, // "Por supuesto... |WBREAK �Esta hecha una mujercita! |WCLEAR �BEACH, CIELO! |WBREAK �RECUERDAS A GRIEL? |WBREAK �A VENIDO A PEDIR TU MANO!" },
	(FRASE) { SPANISH, 18, "Por supuesto... |WBREAK �AMORCITO, SAL!" },
	(FRASE) { SPANISH, 18, "AVISA A LA PRINCESA. |WBREAK �GRIEL HA VENIDO A PEDIR SU MANO!" },
	(FRASE) { SPANISH, 18, "Se ha hecho una mujercita, ya lo ver�s..." },
	(FRASE) { SPANISH, 18, "�Griel? |WBREAK �Eres t�...?" },

	// final 3 // tipo duro o pesadilla
	(FRASE) { SPANISH, 19, "�GROARRR! |BREAK �SI EST�S COMO UN QUESITO! |WBREAK �VEN A MIS BRAZOS, MOCET�N!" },
	(FRASE) { SPANISH, 19, "�AAAAAAH! |BREAK �POR FAVOR NO ME DEVORES!" },
	(FRASE) { SPANISH, 19, "�JA, JA, JA! |BREAK �S�LO UN POQUITO!" },

	// final 3 // s�lo tipo duro
	(FRASE) { SPANISH, 20, "�AY DIOS! |WBREAK �SEGURO QUE NO HAB�A UN FINAL MEJOR?" }, // "�Buah, vaya final! |WBREAK Cualquier otro hubiera sido mejor. |WBREAK Si lo s� elijo el nivel m�s dif�cil." },
	// aqu� acaba el final del tipo duro

	// final 3 // s�lo pesadilla
	(FRASE) { SPANISH, 21, "�TOMA ESTO! |WBREAK �EL CHICO EN LATA ES M�O!" },
	(FRASE) { SPANISH, 21, "......?! |WBREAK �Kbritah?" },
	(FRASE) { SPANISH, 21, "�Corre! Los guardias no tardar�n en llegar." },

		// final 4 // s�lo pesadilla
	(FRASE) { SPANISH, 22, "Gracias por salvarme |WBREAK �Por qu� lo has hecho?" },
	(FRASE) { SPANISH, 22, "T�o, te pasaste el juego en Dif�cil, merec�as algo mejor, �no? |WCLEAR Adem�s eres tan mono con esos cuernecitos... �Me chiflas!" }, // Has terminado el nivel m�s dif�cil y eso no se ve todos los d�as. |WBREAK !ENHORABUENA!" },
	(FRASE) { SPANISH, 22, "Vaya, gracias pero... �no me estar�s raptando?" }, // "Han sido muchas horas pero ha merecido la pena. |WBREAK Oye �no me estar�s raptando, verdad?" },
	(FRASE) { SPANISH, 22, "�Ja, ja, ja! |WBREAK Esto hay que celebrarlo. |WBREAK Ahora te voy a ense�ar el \"verdadero\" final." },
	(FRASE) { SPANISH, 22, "Estupendo, |WAIT:60 pues en marcha hacia la siguiente escena." } , //�Me llevas a la siguiente escena?" },
	(FRASE) { SPANISH, 22, "Oh, vaya. |WBREAK Eres m�s bobo de lo que imaginaba... |WAIT:180" },



	///////////////////////////////////////////////////////////////////////////////////////////////////////



	(FRASE) {       0,  0, "" }, // No quitar

};






static void _prepare_string ( u8 *to, u8 *from )
{
	u16 i;

	for ( i = 0; from [ i ]; i++ )
	{
		to [ i ] = from [ i ];

		switch ( to [ i ] )
		{
			case 250:  to [ i ] = 32 -  1;  break; // �
			case 243:  to [ i ] = 32 -  2;  break; // �
			case 241:  to [ i ] = 32 -  3;  break; // �
			case 237:  to [ i ] = 32 -  4;  break; // �
			case 233:  to [ i ] = 32 -  5;  break; // �
			case 225:  to [ i ] = 32 -  6;  break; // �
			case 218:  to [ i ] = 32 -  7;  break; // �
			case 211:  to [ i ] = 32 -  8;  break; // �
			case 209:  to [ i ] = 32 -  9;  break; // �
			case 205:  to [ i ] = 32 - 10;  break; // �
			case 201:  to [ i ] = 32 - 11;  break; // �
			case 193:  to [ i ] = 32 - 12;  break; // �
			case 191:  to [ i ] = 32 - 13;  break; // �
			case 161:  to [ i ] = 32 - 14;  break; // �
		}
	}
}


static u8 _start;
static u8 _grupo;



/////////////////////////////////////////////////////////////////////////////////////////////////////



void frases_init ( u8 grupo )
{
	_start = 0;
	_grupo  = grupo ;
}



u8 *frases_next ( )
{
	FRASE *f ;

	do
	{
		f = (FRASE*) & _list [ _start++ ];

		if ( f->lang == gamestate.lenguaje  &&  f->grupo == _grupo )
		{
			break;
		}
	}
	while ( f->lang );


	u8 *cadena = MEM_alloc(FRASES_MAX_CHARS);
	_prepare_string ( cadena, f->cadena ) ;

	return cadena;
}



u8 *frases_find ( u8 grupo, u8 numero )
{
	u16 i        = 0;
	u16 contador = 0;

	FRASE *f ;

	do
	{
		f = (FRASE*) & _list [ i++ ];

		if ( f->lang == gamestate.lenguaje  &&  f->grupo == grupo )
		{
			if ( numero == contador++ )
			{
				break;
			}
		}
	}
	while ( f->lang );


	u8 *cadena = MEM_alloc(FRASES_MAX_CHARS);
	_prepare_string ( cadena, f->cadena ) ;

	return cadena;
}


void frases_free ( u8 *frase )
{
	MEM_free(frase);
}










//FRASE *frases_get ( u8 numero )
//{
//	return ( FRASE* ) &_list [ gamestate.lenguaje ] [ numero ];
//}


//void frases_draw ( u8 numero )
//{
//	FRASE *f = frases_get ( numero );
//
//	VDP_drawText ( _prepare_string ( f->cadena ), f->x, f->y );
//}


//void frases_type ( u8 numero, u16 espera )
//{
//	FRASE *f = frases_get ( numero );
//	u8 *frase = _prepare_string ( f->cadena );
//
//	if ( !espera )
//	{
//		VDP_drawText ( frase, f->x, f->y );
//	}
//	else
//	{
//		u8 x = f->x;
//
//		while ( *frase )
//		{
//			u8 txt[2] = { *frase++ };
//			VDP_drawText ( txt, x++, f->y );
//			waitMs ( espera );
//		}
//	}
//}
